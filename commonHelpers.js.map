{"version":3,"file":"commonHelpers.js","sources":["../src/js/galleryMarkup.js","../src/main.js"],"sourcesContent":["export function createMarkup(data) {\n  return data.map(image => `<li class=\"gallery-item\">\n      <div class=\"image-cont\">\n        <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        </a>\n        <div class=\"image-descr\">\n          <div class=\"descr-box\">\n            <p class=\"image-feature\">Likes</p>\n            <p class=\"image-data\">${image.likes}</p>\n          </div>\n          <div class=\"descr-box\">\n            <p class=\"image-feature\">Views</p>\n            <p class=\"image-data\">${image.views}</p>\n          </div>\n          <div class=\"descr-box\">\n            <p class=\"image-feature\">Comments</p>\n            <p class=\"image-data\">${image.comments}</p>\n          </div>\n          <div class=\"descr-box\">\n            <p class=\"image-feature\">Downloads</p>\n              <p class=\"image-data\">${image.downloads}</p>\n          </div>\n        </div>\n      </div>\n    </li>\n  `).join('');\n}\n\n\n\n\n\n\n// export function createMarkup({ hits }, cardContainer) {\n//     if (hits.length === 0) {\n//         catchError();\n//         return;\n//     }\n\n// // if API has a datas, create a markup with answers/response with infos adding to the API configuration\n//     const markup = hits.map(({\n//         webformatURL,\n//         largeImageURL,\n//         tags,\n//         likes,\n//         views,\n//         comments,\n//         downloads }) => {\n        \n// // making an innerHTML with a gallery structure by making list\n//         return `\n//             <li class=\"list-item\">\n//                 <a href=\"${largeImageURL}\">\n//                     <img class=\"card-image\"\n//                     src=\"${webformatURL}\"\n//                     alt=\"${tags}\"\n//                     width=\"360\">\n//                 </a>\n//                 <ul class=\"card-description-list\">\n//                     <li class=\"card-description-item\">\n//                         <h3 class=\"card-description-title\">Likes</h3>\n//                         <p class=\"card-description-value\">${likes}</p>\n//                     </li>\n//                     <li class=\"card-description-item\">\n//                         <h3 class=\"card-description-title\">Views</h3>\n//                         <p class=\"card-description-value\">${views}</p>\n//                     </li>\n//                     <li class=\"card-description-item\">\n//                         <h3 class=\"card-description-title\">Comments</h3>\n//                         <p class=\"card-description-value\">${comments}</p>\n//                     </li>\n//                     <li class=\"card-description-item\">\n//                         <h3 class=\"card-description-title\">Downloads</h3>\n//                         <p class=\"card-description-value\">${downloads}</p>\n//                     </li>\n//                 </ul>\n//             </li>\n//         `;\n//     }).join('');\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\n\nimport { createMarkup } from \"./js/galleryMarkup.js\"\n\nconst API_key = \"44872402-0762bbf0a5ccd686fb6258473\";\nconst base_url = \"https://pixabay.com/api/\";\n\nconst searchForm = document.getElementById(\"search-form\");\nconst gallery = document.getElementById(\"gallery\");\nconst loader = document.getElementById(\"loader\");\nconst loadMoreButton = document.getElementById(\"load-more-button\");\nlet query = \"\";\nlet page = 1;\nlet totalHits = 0;\n\nconst getPictures = async (query, page = 1) => {\n  try {\n    const response = await axios.get(`${base_url}`, {\n      params: {\n        key: API_key,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: page,\n        per_page: 40,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    throw new Error(error.response.status);\n  }\n};\n\n\n// const createMarkup = images => {\n//   return images\n//     .map(\n//       image => `\n//         <div class=\"gallery-item\">\n//             <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n//                 <img src=\"${image.webformatURL}\"\n//                 alt=\"${image.tags}\"/>\n//             </a>\n//             <div class=\"info\">\n//                 <p><strong>Likes:</strong> ${image.likes}</p>\n//                 <p><strong>Views:</strong> ${image.views}</p>\n//                 <p><strong>Comments:</strong> ${image.comments}</p>\n//                 <p><strong>Downloads:</strong> ${image.downloads}</p>\n//             </div>\n//         </div>\n//         `\n//     )\n//     .join(\"\");\n// };\n\nconst displayImages = images => {\n    const markup = createMarkup(images);\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n    \n    const lightbox = new SimpleLightbox(\".gallery-link\", {\n        captionsData: \"alt\",\n        captionDelay: 250,\n        captionPosition: \"bottom\",\n    });\n    lightbox.refresh();\n};\n\nconst showError = message => {\n  iziToast.error({\n    title: \"Error\",\n    message: message,\n  });\n};\n\nconst showInfo = message => {\n  iziToast.info({\n    title: \"Info\",\n    message: message,\n  });\n};\n\nconst handleSearchFormSubmit = async event => {\n    event.preventDefault();\n    query = event.target.elements.query.value.trim();\n\n    if (!query) return;\n\n    gallery.innerHTML = \"\";\n    loadMoreButton.style.display = \"none\";\n    loader.style.display = \"flex\";\n    page = 1;\n\n    try {\n        const data = await getPictures(query, page);\n        const images = data.hits;\n        totalHits = data.totalHits;\n\n    if (images.length === 0) {\n        showError(\n            \"Sorry, there are no images matching your search query. Please try again!\"\n        );\n    } else {\n        displayImages(images);\n        if (totalHits > images.length) {\n            loadMoreButton.style.display = \"block\";\n        }\n    }\n  } catch (error) {\n        showError(\"Something went wrong. Please try again later.\");\n  } finally {\n        loader.style.display = \"none\";\n  }\n};\n\nconst handleLoadMoreButtonClick = async () => {\n    page += 1;\n    loader.style.display = \"flex\";\n\n    try {\n        const data = await getPictures(query, page);\n        const images = data.hits;\n\n    if (images.length === 0) {\n        loadMoreButton.style.display = \"none\";\n        showInfo(\"We're sorry, but you've reached the end of search results.\");\n    } else {\n        displayImages(images);\n        if (page * 40 >= totalHits) {\n            loadMoreButton.style.display = \"none\";\n            showInfo(\"We're sorry, but you've reached the end of search results.\");\n      }\n\n    // const { height: cardHeight } = document\n    //     .querySelector(\".gallery-item\")\n    //     .getBoundingClientRect();\n    // window.scrollBy({\n    //     top: cardHeight * 2,\n    //     behavior: \"smooth\",\n    //     });\n    }\n    } catch (error) {\n        showError(\"Something went wrong. Please try again later.\");\n    } finally {\n        loader.style.display = \"none\";\n    }\n};\n\nsearchForm.addEventListener(\"submit\", handleSearchFormSubmit);\nloadMoreButton.addEventListener(\"click\", handleLoadMoreButtonClick);"],"names":["createMarkup","data","image","API_key","base_url","searchForm","gallery","loader","loadMoreButton","query","page","totalHits","getPictures","axios","error","displayImages","images","markup","SimpleLightbox","showError","message","iziToast","showInfo","handleSearchFormSubmit","event","handleLoadMoreButtonClick"],"mappings":"owBAAO,SAASA,EAAaC,EAAM,CACjC,OAAOA,EAAK,IAAIC,GAAS;AAAA;AAAA,wCAEaA,EAAM,aAAa;AAAA,4CACfA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,oCAK9CA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,oCAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,oCAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,sCAIZA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,GAKlD,EAAE,KAAK,EAAE,CACZ,CCnBA,MAAMC,EAAU,qCACVC,EAAW,2BAEXC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAiB,SAAS,eAAe,kBAAkB,EACjE,IAAIC,EAAQ,GACRC,EAAO,EACPC,EAAY,EAEhB,MAAMC,EAAc,MAAOH,EAAOC,EAAO,IAAM,CAC7C,GAAI,CAYF,OAXiB,MAAMG,EAAM,IAAI,GAAGT,CAAQ,GAAI,CAC9C,OAAQ,CACN,IAAKD,EACL,EAAGM,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACX,CACP,CAAK,GACe,IACjB,OAAQI,EAAO,CACd,MAAM,IAAI,MAAMA,EAAM,SAAS,MAAM,CACtC,CACH,EAwBMC,EAAgBC,GAAU,CAC5B,MAAMC,EAASjB,EAAagB,CAAM,EAClCV,EAAQ,mBAAmB,YAAaW,CAAM,EAE7B,IAAIC,EAAe,gBAAiB,CACjD,aAAc,MACd,aAAc,IACd,gBAAiB,QACzB,CAAK,EACQ,QAAO,CACpB,EAEMC,EAAYC,GAAW,CAC3BC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,CACb,CAAG,CACH,EAEME,EAAWF,GAAW,CAC1BC,EAAS,KAAK,CACZ,MAAO,OACP,QAASD,CACb,CAAG,CACH,EAEMG,EAAyB,MAAMC,GAAS,CAI1C,GAHAA,EAAM,eAAc,EACpBf,EAAQe,EAAM,OAAO,SAAS,MAAM,MAAM,OAEtC,EAACf,EAEL,CAAAH,EAAQ,UAAY,GACpBE,EAAe,MAAM,QAAU,OAC/BD,EAAO,MAAM,QAAU,OACvBG,EAAO,EAEP,GAAI,CACA,MAAMT,EAAO,MAAMW,EAAYH,EAAOC,CAAI,EACpCM,EAASf,EAAK,KACpBU,EAAYV,EAAK,UAEjBe,EAAO,SAAW,EAClBG,EACI,0EACZ,GAEQJ,EAAcC,CAAM,EAChBL,EAAYK,EAAO,SACnBR,EAAe,MAAM,QAAU,SAGxC,MAAe,CACVW,EAAU,+CAA+C,CACjE,QAAY,CACJZ,EAAO,MAAM,QAAU,MAC5B,EACH,EAEMkB,EAA4B,SAAY,CAC1Cf,GAAQ,EACRH,EAAO,MAAM,QAAU,OAEvB,GAAI,CAEA,MAAMS,GADO,MAAMJ,EAAYH,EAAOC,CAAI,GACtB,KAEpBM,EAAO,SAAW,GAClBR,EAAe,MAAM,QAAU,OAC/Bc,EAAS,4DAA4D,IAErEP,EAAcC,CAAM,EAChBN,EAAO,IAAMC,IACbH,EAAe,MAAM,QAAU,OAC/Bc,EAAS,4DAA4D,GAW5E,MAAe,CACZH,EAAU,+CAA+C,CACjE,QAAc,CACNZ,EAAO,MAAM,QAAU,MAC1B,CACL,EAEAF,EAAW,iBAAiB,SAAUkB,CAAsB,EAC5Df,EAAe,iBAAiB,QAASiB,CAAyB"}